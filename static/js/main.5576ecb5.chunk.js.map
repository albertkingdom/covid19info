{"version":3,"sources":["components/Carousel/Carousel.module.scss","components/Cards/Card.js","components/Cards/Cards.js","components/Chart/Chart.js","components/CountryPicker/CountryPicker.js","components/Map/World.js","components/Carousel/Carousel.js","api/index.js","components/Map/LeafletMap.js","App.js","index.js","components/Cards/Cards.module.scss"],"names":["module","exports","Card","country","data","title","Col","md","className","styles","infoCard","digit","start","end","value","separator","Cards","props","Date","lastUpdate","Container","cardContainer","column","confirmed","recovered","deaths","Chart","historyData","linechart","labels","Object","keys","datasets","values","label","borderColor","fill","pointBackgroundColor","backgroundColor","data-test","height","width","options","maintainAspectRatio","barChart","legend","display","style","padding","CountryPicker","changeCountry","countryNames","name","id","onChange","e","target","defaultValue","map","index","key","WorldMap","Carousel","children","useState","select","setSelect","carousel","slide","active","item","onClick","buttonLeft","buttonRight","fetchData","a","axios","get","modifiedData","cases","console","log","fetchHistoryData","fetchCountriesName","fetchIndividualCountriesData","countryStyle","fillColor","fillOpacity","color","dashArray","LeafletMap","location","countrySelect","center","setCenter","useEffect","navigator","geolocation","getCurrentPosition","position","coords","currentLocation","latitude","longitude","lat","long","mapRef","useRef","Map","zoom","ref","TileLayer","attribution","url","GeoJSON","mapData","onEachFeature","layer","countryName","properties","bindPopup","on","click","event","current","leafletElement","fitBounds","getBounds","mouseleave","resetStyle","Marker","App","setData","setIsloading","setCountry","setLocation","allCountryData","setAllCountryData","globalData","setGlobalData","setHistoryData","setCountryNames","fetcheddata","globalHistoryData","individualcountrydata","names","getGlobalData","href","filteredCountryData","filter","includes","updated","countryInfo","handleIfSelectCountry","rootElement","document","getElementById","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.5576ecb5.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"carousel\":\"Carousel_carousel__3ig3q\",\"slide\":\"Carousel_slide__7QS34\",\"active\":\"Carousel_active__21EBj\",\"item\":\"Carousel_item__3xxSs\",\"button\":\"Carousel_button__pVl5x\",\"buttonLeft\":\"Carousel_buttonLeft__FQpiL\",\"buttonRight\":\"Carousel_buttonRight__r9wg4\"};","import React from \"react\";\r\nimport Col from \"react-bootstrap/Col\";\r\nimport CountUp from \"react-countup\";\r\n\r\nimport styles from \"./Cards.module.scss\";\r\n\r\nexport default function Card({ country, data, title }) {\r\n  return (\r\n    <Col md={12}>\r\n      <div className={styles.infoCard}>\r\n        <h5 className=\"\">\r\n          {country && country !== \"Global\" ? country : \"全球\"}\r\n          {title}\r\n        </h5>\r\n        <div className={styles.digit}>\r\n          {data && <CountUp start={0} end={data.value} separator=\",\" />}\r\n        </div>\r\n      </div>\r\n    </Col>\r\n  );\r\n}\r\n","import React from \"react\";\r\n// import { Card, CardContent, Typography } from \"@material-ui/core\";\r\nimport styles from \"./Cards.module.scss\";\r\n\r\nimport Container from \"react-bootstrap/Container\";\r\nimport Row from \"react-bootstrap/Row\";\r\nimport Card from \"./Card\";\r\n\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst Cards = (props) => {\r\n  const date = new Date(props.data.lastUpdate); //更新時間\r\n  const display = (\r\n    <Container className={styles.cardContainer}>\r\n      {/* <Row> */}\r\n      <Card\r\n        column={12}\r\n        country={props.country}\r\n        data={props.data.confirmed}\r\n        title=\"確診人數\"\r\n      />\r\n\r\n      <Card\r\n        column={12}\r\n        country={props.country}\r\n        data={props.data.recovered}\r\n        title=\"復原人數\"\r\n      />\r\n\r\n      <Card\r\n        column={12}\r\n        country={props.country}\r\n        data={props.data.deaths}\r\n        title=\"死亡人數\"\r\n      />\r\n      {/* </Row> */}\r\n    </Container>\r\n  );\r\n  return display;\r\n};\r\n//props型別檢查\r\nCards.propTypes = {\r\n  country: PropTypes.string,\r\n  data: PropTypes.shape({\r\n    confirmed: PropTypes.object,\r\n    deaths: PropTypes.object,\r\n    recovered: PropTypes.object,\r\n  }),\r\n};\r\nexport default Cards;\r\n","import React from \"react\";\r\nimport { Line, Bar } from \"react-chartjs-2\";\r\nimport Container from \"react-bootstrap/Container\";\r\n\r\nconst Chart = ({\r\n  data: { confirmed, recovered, deaths },\r\n  country,\r\n  historyData,\r\n}) => {\r\n  const linechart = historyData ? (\r\n    <Line\r\n      data={{\r\n        // labels: dailydata.map((item) => item.date),\r\n        labels: Object.keys(historyData.confirmed),\r\n        datasets: [\r\n          {\r\n            // data: dailydata.map((item) => item.confirmed),\r\n            data: Object.values(historyData.confirmed),\r\n\r\n            label: \"Infected\",\r\n            borderColor: \"grey\",\r\n            fill: true,\r\n            pointBackgroundColor: \"grey\",\r\n          },\r\n          {\r\n            // data: dailydata.map((item) => item.deaths),\r\n            data: Object.values(historyData.deaths),\r\n\r\n            label: \"death\",\r\n            borderColor: \"red\",\r\n            fill: true,\r\n            pointBackgroundColor: \"red\",\r\n            backgroundColor: \"#fc7272\",\r\n          },\r\n        ],\r\n      }}\r\n      data-test=\"linePlot\"\r\n      height={\"90%\"}\r\n      width={\"100%\"}\r\n      options={{ maintainAspectRatio: false }}\r\n    />\r\n  ) : null;\r\n  const barChart = confirmed ? (\r\n    <Bar\r\n      data={{\r\n        labels: [\"Infected\", \"Recovered\", \"Deaths\"],\r\n        datasets: [\r\n          {\r\n            label: \"People\",\r\n            backgroundColor: [\r\n              \"rgba(0, 0, 255, 0.5)\",\r\n              \"rgba(0, 255, 0, 0.5)\",\r\n              \"rgba(255, 0, 0, 0.5)\",\r\n            ],\r\n            data: [confirmed.value, recovered.value, deaths.value],\r\n          },\r\n        ],\r\n      }}\r\n      options={{\r\n        legend: { display: false },\r\n        maintainAspectRatio: false,\r\n        // title: { display: true, text: `Current state in ${country}` }\r\n      }}\r\n      height={90}\r\n      width={100}\r\n    />\r\n  ) : null;\r\n  return (\r\n    <Container style={{ height: \"600px\", padding: \"20px\" }}>\r\n      {country !== \"Global\" ? barChart : linechart}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Chart;\r\n","import React, { useState, useEffect } from \"react\";\r\n// import { NativeSelect, FormControl, InputLabel } from \"@material-ui/core\";\r\n// import { fetchCountriesName } from \"../../api\";\r\n\r\nconst CountryPicker = ({ changeCountry, countryNames, country }) => {\r\n  return (\r\n    <>\r\n      <form>\r\n        <div className=\"form-row justify-content-center my-4\">\r\n          {/* <label for=\"\">123</label> */}\r\n          <div className=\"col-10 col-lg-2\">\r\n            <select\r\n              className=\"form-control\"\r\n              name=\"\"\r\n              id=\"\"\r\n              onChange={(e) => changeCountry(e.target.value)}\r\n              value={country}\r\n            >\r\n              <option defaultValue>Global</option>\r\n              {countryNames\r\n                ? countryNames.map((country, index) => (\r\n                    <option key={index} value={country}>\r\n                      {country}\r\n                    </option>\r\n                  ))\r\n                : \"\"}\r\n            </select>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default CountryPicker;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport * as d3 from \"d3\";\r\nimport { geoMercator, geoPath, geoGraticule10, geoEqualEarth } from \"d3-geo\";\r\nimport $ from \"jquery\";\r\n\r\nfunction WorldMap({ country }) {\r\n  const [worlddata, setWorlddata] = useState([]);\r\n  const [lastcountry, setLastCountry] = useState({ name: \"123\", color: \"123\" });\r\n\r\n  console.log(\"map country\", country);\r\n  const projection = geoEqualEarth()\r\n    .scale(160)\r\n    .translate([800 / 2, 450 / 2]);\r\n  useEffect(() => {\r\n    fetch(\"map/ne_110m_admin_0_countries_geojson.json\")\r\n      // fetch(\"./map/test.json\")\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        // console.log(\"world\", data);\r\n        setWorlddata(data.features);\r\n        // draw(data);\r\n      });\r\n    const map = d3\r\n      .select(\"#map\")\r\n      .attr(\"width\", 500)\r\n      .attr(\"height\", 500);\r\n    function draw(mapData) {\r\n      // 設定投影中心點與縮放倍率\r\n      const projection = d3.geoMercator().translate([1000 / 2, 1000 / 2]);\r\n\r\n      // 將投影資料轉換為路徑\r\n      const path = d3.geoPath().projection(projection);\r\n\r\n      // 繪製地圖\r\n      map\r\n        .selectAll(\"path\")\r\n        .data(mapData.objects.ne_110m_land.geometries)\r\n        .enter()\r\n        .append(\"path\")\r\n        .attr(\"d\", path)\r\n        .attr(\"stroke\", \"black\")\r\n        .attr(\"stroke-width\", \"0.7\")\r\n        .attr(\"fill\", \"steelblue\")\r\n        .on(\"mouseover\", function() {\r\n          d3.select(this).attr(\"fill\", \"#007bff\");\r\n        })\r\n        // 滑鼠碰到後改變顏色\r\n        .on(\"mouseleave\", function() {\r\n          d3.select(this).attr(\"fill\", \"steelblue\");\r\n        });\r\n      // 滑鼠離開將顏色變回\r\n    }\r\n  }, []);\r\n  //ADD function to svg\r\n  // const handleCountryEnter = index => {\r\n  //   // console.log('hover on',worlddata[index].properties.NAME);\r\n  //   $(\"#countryname\").text(\"目前國家: \" + worlddata[index].properties.NAME);\r\n  //   // $('path').attr('fill','red')\r\n  // };\r\n  let lastpath; //save last target\r\n  let lastpathcolor; //save last target color\r\n  const handleClick = e => {\r\n    // console.log(e.target);\r\n    $(lastpath).attr(\"fill\", lastpathcolor);\r\n    lastpathcolor = $(e.target).attr(\"fill\");\r\n    lastpath = e.target;\r\n    console.log(\"lastpath\", lastpath);\r\n    console.log(\"lastpathcolor\", lastpathcolor);\r\n    // $('g.countries').find('path').attr('fill','red')\r\n    // $(\"path[fill='red']\").attr('fill',lastpathcolor)\r\n\r\n    $(e.target).attr(\"fill\", \"red\");\r\n  };\r\n  useEffect(() => {\r\n    console.log(\"props\", country);\r\n    //將上一個選擇的country設定回預設\r\n    console.log(\"lastcountry prop\", lastcountry.name);\r\n    $(`path[data-countryname=${lastcountry.name}]`).attr(\r\n      \"fill\",\r\n      lastcountry.color\r\n    );\r\n    let lastcountryproperty = {\r\n      name: country,\r\n      color: $(`path[data-countryname=${country}]`).attr(\"fill\")\r\n    };\r\n    setLastCountry(lastcountryproperty);\r\n    // console.log('last country',lastcountryselect)\r\n    $(`path[data-countryname=${country}]`).attr(\"fill\", \"blue\");\r\n  }, [country]);\r\n  return (\r\n    <>\r\n      <h5 className=\"my-3\" id=\"countryname\">\r\n        {/* 目前國家: */}\r\n      </h5>\r\n      <p style={{ color: \"blue\" }}>選取不同國家在地圖上會變藍色</p>\r\n      <div id=\"map\">\r\n        <svg\r\n          style={{ border: \"1px solid gray\" }}\r\n          width=\"1000\"\r\n          height=\"550\"\r\n          viewBox=\"0 0 800 450\"\r\n        >\r\n          <g className=\"countries\">\r\n            {worlddata.map((d, i) => (\r\n              <path\r\n                key={`path-${i}`}\r\n                d={geoPath().projection(projection)(d)}\r\n                className=\"country\"\r\n                fill={`rgba(38,50,56,${(1 / worlddata.length) * i})`}\r\n                stroke=\"#FFFFFF\"\r\n                strokeWidth={0.5}\r\n                // onMouseEnter={() => handleCountryEnter(i)}\r\n                // onClick={e => handleClick(e)}\r\n                data-countryname={d.properties.NAME}\r\n              />\r\n            ))}\r\n          </g>\r\n        </svg>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default WorldMap;\r\n","import React, { useState } from \"react\";\r\nimport styles from \"./Carousel.module.scss\";\r\n\r\nexport default function Carousel({ children }) {\r\n  const [select, setSelect] = useState(1);\r\n  return (\r\n    <>\r\n      <div className={styles.carousel}>\r\n        <div className={`${styles.slide} ${select === 2 ? styles.active : \"\"}`}>\r\n          <div className={`${styles.item} item1`}>{children[0]}</div>\r\n          <div className={`${styles.item} item2`}>{children[1]}</div>\r\n        </div>\r\n      </div>\r\n      <button onClick={() => setSelect(1)} className={`${styles.buttonLeft}`} >\r\n        <i className=\"fas fa-arrow-left\"></i>\r\n      </button>\r\n      <button onClick={() => setSelect(2)} className={styles.buttonRight}>\r\n        <i className=\"fas fa-arrow-right\"></i>\r\n      </button>\r\n    </>\r\n  );\r\n}\r\n","import axios from \"axios\";\r\n\r\n// const url = \"https://covid19.mathdro.id/api\";\r\n\r\nexport const fetchData = async () => {\r\n  const url = \"https://corona.lmao.ninja/v2/all?yesterday\";\r\n\r\n  try {\r\n    const { data } = await axios.get(url);\r\n\r\n    const modifiedData = {\r\n      confirmed: { value: data.cases },\r\n      recovered: { value: data.recovered },\r\n      deaths: { value: data.deaths },\r\n      lastUpdate: data.lastUpdate,\r\n    };\r\n    // console.log(\"fetchData\", modifiedData);\r\n    return modifiedData;\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\nexport const fetchHistoryData = async () => {\r\n  const url = \"https://corona.lmao.ninja/v2/historical/all\";\r\n  try {\r\n    // const response = await axios.get(url);\r\n    // const { data } = await axios.get(`${url}/daily`);\r\n    const { data } = await axios.get(url);\r\n\r\n    // console.log(\"data_daily\", data);\r\n\r\n    // const modifiedData = data.map((daily) => ({\r\n    //   confirmed: daily.confirmed.total,\r\n    //   deaths: daily.deaths.total,\r\n    //   recovered: daily.recovered.total,\r\n    //   date: daily.reportDate,\r\n    // }));\r\n    const modifiedData = {\r\n      confirmed: data.cases,\r\n      deaths: data.deaths,\r\n      recovered: data.recovered,\r\n    };\r\n    // console.log(\"data_daily_modify\", modifiedData);\r\n\r\n    return modifiedData;\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n\r\n//country name\r\nexport const fetchCountriesName = async () => {\r\n  const url = \"https://corona.lmao.ninja/v2/countries?yesterday&sort\";\r\n  try {\r\n    const { data } = await axios.get(url);\r\n    // console.log('data',data);\r\n    return data.map((item) => item.country);\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n//individual country data\r\nexport const fetchIndividualCountriesData = async () => {\r\n  const url = \"https://corona.lmao.ninja/v2/countries?yesterday&sort\";\r\n  try {\r\n    const { data } = await axios.get(url);\r\n    // console.log('data',data);\r\n    return data;\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n};\r\n","import React, { useRef, useState, useEffect } from \"react\";\r\nimport { Map, TileLayer, GeoJSON, Marker } from \"react-leaflet\";\r\nimport mapData from \"./custom.geo.json\";\r\n\r\n//color:邊線顏色,dashArray:邊線的虛線類型\r\nconst countryStyle = {\r\n  fillColor: \"red\",\r\n  fillOpacity: 0.3,\r\n  color: \"white\",\r\n  dashArray: \"3\",\r\n};\r\n\r\nconst LeafletMap = ({ location, countrySelect }) => {\r\n  const [clickCountryName, setClickCountryName] = useState(\"\");\r\n  const [center, setCenter] = useState([37.8, -96]);\r\n\r\n  useEffect(() => {\r\n    function handleCenter() {\r\n      navigator.geolocation.getCurrentPosition(function (position) {\r\n        const { latitude, longitude } = position.coords;\r\n\r\n        const currentLocation = [latitude, longitude];\r\n\r\n        let center = location\r\n          ? [location.lat, location.long]\r\n          : currentLocation\r\n          ? currentLocation\r\n          : [37.8, -96];\r\n\r\n        setCenter(center);\r\n      });\r\n    }\r\n    handleCenter();\r\n  }, [location]);\r\n\r\n \r\n\r\n  const mapRef = useRef(null);\r\n  const onEachCountry = (country, layer, countrySelect) => {\r\n    const countryName = country.properties.name;\r\n    // console.log(\"countryName includes?\", countryName.includes(countrySelect));\r\n\r\n    layer.bindPopup(countryName); //觸發顯示國家名\r\n\r\n    // layer.options.fillColor = \"green\";\r\n\r\n    // layer.options.fillColor = countryName.includes(countrySelect)\r\n    //   ? \"red\"\r\n    //   : \"green\"; //改背景顏色\r\n\r\n    layer.on({\r\n      click: (event) => {\r\n        // console.log(\"click\", event.target);\r\n\r\n        const map = mapRef.current.leafletElement;\r\n        // console.log(mapRef);\r\n        map.fitBounds(event.target.getBounds()); //將click到的地區擺到正中央\r\n        // console.log(mapRef)\r\n\r\n        // setClickCountryName(event.target.feature.properties.name);\r\n      },\r\n      mouseleave: (event) => {\r\n        event.target.resetStyle(); //no effect?\r\n      },\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"\">\r\n      {/* <h5 style={{ marginTop: \"25px\" }}>WHERE IS THE COUNTRY?</h5> */}\r\n      <Map\r\n        center={center}\r\n        zoom={3}\r\n        style={{ width: \"100%\", height: \"600px\"}}\r\n        ref={mapRef}\r\n      >\r\n        <TileLayer\r\n          attribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n          url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n        />\r\n        <GeoJSON\r\n          style={countryStyle}\r\n          data={mapData}\r\n          onEachFeature={onEachCountry}\r\n        />\r\n        <Marker position={center} />\r\n      </Map>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LeafletMap;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport \"./styles.css\";\r\n\r\nimport { Cards, Chart, CountryPicker } from \"./components\";\r\nimport Carousel from \"./components/Carousel/Carousel\";\r\nimport {\r\n  fetchData,\r\n  fetchHistoryData,\r\n  fetchIndividualCountriesData,\r\n  fetchCountriesName,\r\n} from \"./api\";\r\nimport LeafletMap from \"./components/Map/LeafletMap\";\r\n\r\nexport default function App() {\r\n  const [data, setData] = useState({}); //傳給子元件的資料\r\n  const [isloading, setIsloading] = useState(true);\r\n  const [country, setCountry] = useState();\r\n  const [location, setLocation] = useState(null); //經緯度\r\n  const [allCountryData, setAllCountryData] = useState(); //存所有國家資料\r\n  const [globalData, setGlobalData] = useState(); //存全球資料\r\n  const [historyData, setHistoryData] = useState();\r\n  const [countryNames, setCountryNames] = useState();\r\n  async function getGlobalData() {\r\n    const fetcheddata = await fetchData();\r\n    const globalHistoryData = await fetchHistoryData(); //歷史資料\r\n    const individualcountrydata = await fetchIndividualCountriesData(); //individual country data\r\n    const names = await fetchCountriesName();\r\n    setGlobalData(fetcheddata);\r\n    setData(fetcheddata);\r\n    setHistoryData(globalHistoryData);\r\n    setAllCountryData(individualcountrydata);\r\n    setCountryNames(names);\r\n    setIsloading(false);\r\n  }\r\n\r\n  const handleIfSelectCountry = (country) => {\r\n    const filteredCountryData = allCountryData.filter(\r\n      (item) => item.country === country || item.country.includes(country)\r\n    );\r\n    setData({\r\n      confirmed: { value: filteredCountryData[0].cases },\r\n      recovered: { value: filteredCountryData[0].recovered },\r\n      deaths: { value: filteredCountryData[0].deaths },\r\n      lastUpdate: filteredCountryData[0].updated,\r\n    });\r\n    setLocation({\r\n      lat: filteredCountryData[0].countryInfo.lat,\r\n      long: filteredCountryData[0].countryInfo.long,\r\n    });\r\n  };\r\n  const handleIfSelectGlobal = () => {\r\n    setData(globalData);\r\n    setLocation(null);\r\n  };\r\n  useEffect(() => {\r\n    setCountry(\"Global\");\r\n    getGlobalData();\r\n  }, []);\r\n\r\n  //處理country選擇\r\n  const handleCountryChange = (country) => {\r\n    setCountry(country);\r\n    country === \"Global\"\r\n      ? handleIfSelectGlobal()\r\n      : handleIfSelectCountry(country);\r\n  };\r\n\r\n  return (\r\n    <div className=\"App appCustom\" data-test=\"appCustom\">\r\n      <div className=\"appBackground\" />\r\n      <h2 className=\"text-uppercase mb-4 py-4 text-white\">\r\n        Covid19 live info demo\r\n      </h2>\r\n      <h6 className=\"text-white\">\r\n        The COVID-19 info API is from<span> </span>\r\n        <a className=\"text-white\" href=\"https://github.com/disease-sh/API\">\r\n          github.com/NovelCOVID/API\r\n        </a>\r\n      </h6>\r\n      <CountryPicker\r\n        changeCountry={handleCountryChange}\r\n        countryNames={countryNames}\r\n        country={country}\r\n      />\r\n\r\n      <main className=\"row justify-content-center align-items-center\">\r\n        <div className=\"col-12 col-md-4 col-lg-3\">\r\n          <Cards data={data} country={country} />\r\n        </div>\r\n        <div className=\"col-10 col-md-8 col-lg-7\">\r\n          <Carousel>\r\n            <LeafletMap countrySelect={country} location={location} />\r\n\r\n            <Chart data={data} country={country} historyData={historyData} />\r\n          </Carousel>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\n\r\nimport App from \"./App\";\r\n\r\nconst rootElement = document.getElementById(\"root\");\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  rootElement\r\n);\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bk\":\"Cards_bk__2znTp\",\"cardContainer\":\"Cards_cardContainer__2gxmz\",\"infoCard\":\"Cards_infoCard__3tpYn\",\"digit\":\"Cards_digit__1SieJ\"};"],"sourceRoot":""}